import"../chunks/CWj6FrbW.js";import{i as oe}from"../chunks/ueixO8DJ.js";import{s as K,e as Z,c as Ie,a as Je}from"../chunks/DgPuepp8.js";import{ag as Xe,v as Qe,aw as Ne,B as ce,w as C,a7 as Ze,x as Oe,h as t,M as j,y as je,z as $e,A as Ae,C as fe,I as se,aa as ea,D as Pe,F as qe,G as aa,ax as ve,ae as De,a3 as ta,a1 as xe,ay as me,az as Se,aA as he,V as T,aB as Te,a5 as na,aC as ra,aD as ia,ad as sa,aE as la,aF as oa,aG as ua,a8 as da,aH as ca,aI as fa,aJ as va,aK as _a,aL as ba,p as ee,aM as G,aN as ke,l as P,t as W,a as N,m as ae,q as x,P as g,i as le,n as A,o as w,aO as ga,aP as _e}from"../chunks/cDN6pV7k.js";import{p as E,i as ma}from"../chunks/T_035w3F.js";let Be=!1;function ha(){Be||(Be=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const a of n.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function He(n,e){return e}function ka(n,e,a,r){for(var o=[],u=e.length,i=0;i<u;i++)ia(e[i].e,o,!0);var d=u>0&&o.length===0&&a!==null;if(d){var k=a.parentNode;sa(k),k.append(a),r.clear(),H(n,e[0].prev,e[u-1].next)}la(o,()=>{for(var _=0;_<u;_++){var s=e[_];d||(r.delete(s.k),H(n,s.prev,s.next)),oa(s.e,!d)}})}function Ge(n,e,a,r,o,u=null){var i=n,d={flags:e,items:new Map,first:null},k=(e&Ne)!==0;if(k){var _=n;i=C?ce(Ze(_)):_.appendChild(Xe())}C&&Oe();var s=null,f=!1,l=j(()=>{var v=a();return na(v)?v:v==null?[]:De(v)});Qe(()=>{var v=t(l),c=v.length;if(f&&c===0)return;f=c===0;let S=!1;if(C){var p=je(i)===$e;p!==(c===0)&&(i=Ae(),ce(i),fe(!1),S=!0)}if(C){for(var h=null,M,y=0;y<c;y++){if(se.nodeType===8&&se.data===ea){i=se,S=!0,fe(!1);break}var m=v[y],b=r(m,y);M=Ke(se,d,h,null,m,b,y,o,e,a),d.items.set(b,M),h=M}c>0&&ce(Ae())}C||pa(v,d,i,o,e,r,a),u!==null&&(c===0?s?Pe(s):s=qe(()=>u(i)):s!==null&&aa(s,()=>{s=null})),S&&fe(!0),t(l)}),C&&(i=se)}function pa(n,e,a,r,o,u,i){var V,F,J,ue;var d=(o&ra)!==0,k=(o&(me|he))!==0,_=n.length,s=e.items,f=e.first,l=f,v,c=null,S,p=[],h=[],M,y,m,b;if(d)for(b=0;b<_;b+=1)M=n[b],y=u(M,b),m=s.get(y),m!==void 0&&((V=m.a)==null||V.measure(),(S??(S=new Set)).add(m));for(b=0;b<_;b+=1){if(M=n[b],y=u(M,b),m=s.get(y),m===void 0){var te=l?l.e.nodes_start:a;c=Ke(te,e,c,c===null?e.first:c.next,M,y,b,r,o,i),s.set(y,c),p=[],h=[],l=c.next;continue}if(k&&ya(m,M,b,o),(m.e.f&ve)!==0&&(Pe(m.e),d&&((F=m.a)==null||F.unfix(),(S??(S=new Set)).delete(m))),m!==l){if(v!==void 0&&v.has(m)){if(p.length<h.length){var z=h[0],L;c=z.prev;var U=p[0],Y=p[p.length-1];for(L=0;L<p.length;L+=1)Le(p[L],z,a);for(L=0;L<h.length;L+=1)v.delete(h[L]);H(e,U.prev,Y.next),H(e,c,U),H(e,Y,z),l=z,c=Y,b-=1,p=[],h=[]}else v.delete(m),Le(m,l,a),H(e,m.prev,m.next),H(e,m,c===null?e.first:c.next),H(e,c,m),c=m;continue}for(p=[],h=[];l!==null&&l.k!==y;)(l.e.f&ve)===0&&(v??(v=new Set)).add(l),h.push(l),l=l.next;if(l===null)continue;m=l}p.push(m),c=m,l=m.next}if(l!==null||v!==void 0){for(var D=v===void 0?[]:De(v);l!==null;)(l.e.f&ve)===0&&D.push(l),l=l.next;var ne=D.length;if(ne>0){var re=(o&Ne)!==0&&_===0?a:null;if(d){for(b=0;b<ne;b+=1)(J=D[b].a)==null||J.measure();for(b=0;b<ne;b+=1)(ue=D[b].a)==null||ue.fix()}ka(e,D,re,s)}}d&&ta(()=>{var ie;if(S!==void 0)for(m of S)(ie=m.a)==null||ie.apply()}),xe.first=e.first&&e.first.e,xe.last=c&&c.e}function ya(n,e,a,r){(r&me)!==0&&Se(n.v,e),(r&he)!==0?Se(n.i,a):n.i=a}function Ke(n,e,a,r,o,u,i,d,k,_){var s=(k&me)!==0,f=(k&ua)===0,l=s?f?T(o):Te(o):o,v=(k&he)===0?i:Te(i),c={i:v,v:l,k:u,a:null,e:null,prev:a,next:r};try{return c.e=qe(()=>d(n,l,v,_),C),c.e.prev=a&&a.e,c.e.next=r&&r.e,a===null?e.first=c:(a.next=c,a.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function Le(n,e,a){for(var r=n.next?n.next.e.nodes_start:a,o=e?e.e.nodes_start:a,u=n.e.nodes_start;u!==r;){var i=da(u);o.before(u),u=i}}function H(n,e,a){e===null?n.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function pe(n,e,a,r,o){var d;C&&Oe();var u=(d=e.$$slots)==null?void 0:d[a],i=!1;u===!0&&(u=e.children,i=!0),u===void 0||u(n,i?()=>r:r)}function Ma(n,e,a){var r=n==null?"":""+n;return e&&(r=r?r+" "+e:e),r===""?null:r}function $(n,e,a,r,o,u){var i=n.__className;if(C||i!==a||i===void 0){var d=Ma(a,r);(!C||d!==n.getAttribute("class"))&&(d==null?n.removeAttribute("class"):n.className=d),n.__className=a}return u}const Ea=Symbol("is custom element"),wa=Symbol("is html");function Aa(n){if(C){var e=!1,a=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var r=n.value;O(n,"value",null),n.value=r}if(n.hasAttribute("checked")){var o=n.checked;O(n,"checked",null),n.checked=o}}};n.__on_r=a,_a(a),ha()}}function xa(n,e){var a=We(n);a.value===(a.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function O(n,e,a,r){var o=We(n);C&&(o[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||o[e]!==(o[e]=a)&&(e==="loading"&&(n[ca]=a),a==null?n.removeAttribute(e):typeof a!="string"&&Sa(n).includes(e)?n[e]=a:n.setAttribute(e,a))}function We(n){return n.__attributes??(n.__attributes={[Ea]:n.nodeName.includes("-"),[wa]:n.namespaceURI===fa})}var Re=new Map;function Sa(n){var e=Re.get(n.nodeName);if(e)return e;Re.set(n.nodeName,e=[]);for(var a,r=n,o=Element.prototype;o!==r;){a=ba(r);for(var u in a)a[u].set&&e.push(u);r=va(r)}return e}var Ta=P("<div></div>"),Ba=P('<div class="bar-percent svelte-5qgytg"> </div>'),La=P('<div><div class="bar-label svelte-5qgytg"> </div> <div class="bar-blocks svelte-5qgytg" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div> <!> <!></div>');function Ra(n,e){ee(e,!1);const a=T(),r=T(),o=T();let u=E(e,"percent",8,0),i=E(e,"blocks",8,30),d=E(e,"label",8,"PROGRESS"),k=E(e,"showPercent",8,!0),_=E(e,"hideOnMobile",8,!0);G(()=>le(u()),()=>{g(a,Math.max(0,Math.min(100,Math.round(u()))))}),G(()=>(t(a),le(i())),()=>{g(r,Math.round(t(a)/100*i()))}),G(()=>(le(i()),t(r)),()=>{g(o,Array.from({length:i()},(h,M)=>M<t(r)))}),ke();var s=La(),f=A(s),l=A(f,!0);w(f);var v=x(f,2);Ge(v,5,()=>t(o),He,(h,M)=>{var y=Ta();W(()=>$(y,1,`bar-block ${t(M)?"filled":""}`,"svelte-5qgytg")),N(h,y)}),w(v);var c=x(v,2);{var S=h=>{var M=Ba(),y=A(M);w(M),W(()=>K(y,`${t(a)??""}%`)),N(h,M)};ma(c,h=>{k()&&h(S)})}var p=x(c,2);pe(p,e,"default",{}),w(s),W(()=>{$(s,1,`bar ${_()?"hide-mobile":""}`,"svelte-5qgytg"),O(s,"aria-label",d()),K(l,d()),O(v,"aria-valuenow",t(a))}),N(n,s),ae()}var Ca=P('<button><span class="btn-text svelte-1gnnoef"> </span> <!></button>');function be(n,e){ee(e,!1);let a=E(e,"label",8),r=E(e,"variant",8,"default"),o=E(e,"disabled",8,!1),u=E(e,"ariaLabel",8),i=E(e,"size",8,"md"),d=E(e,"onClick",8);function k(){!o()&&d()&&d()()}oe();var _=Ca(),s=A(_),f=A(s,!0);w(s);var l=x(s,2);pe(l,e,"default",{}),w(_),W(()=>{$(_,1,`btn ${r()??""} ${i()??""}`,"svelte-1gnnoef"),_.disabled=o(),O(_,"aria-label",u()??a()),K(f,a())}),Z("click",_,k),N(n,_),ae()}var Ia=P('<div class="action svelte-duoovu"><!> <!> <!></div>');function Na(n,e){ee(e,!1);let a=E(e,"isRunning",8);const r=Ie();function o(){a()||r("start")}function u(){a()&&r("pause")}function i(){r("reset")}oe();var d=Ia(),k=A(d);const _=j(()=>a()?"default":"primary");be(k,{label:"START",get variant(){return t(_)},size:"md",onClick:o,get disabled(){return a()},ariaLabel:"Start"});var s=x(k,2);const f=j(()=>a()?"primary":"default"),l=j(()=>!a());be(s,{label:"PAUSE",get variant(){return t(f)},size:"md",onClick:u,get disabled(){return t(l)},ariaLabel:"Pause"});var v=x(s,2);be(v,{label:"RESET",size:"md",onClick:i,ariaLabel:"Reset"}),w(d),N(n,d),ae()}var Oa=P('<div class="input-content svelte-fc96fq"><div class="input-label svelte-fc96fq"> </div> <div class="input-block svelte-fc96fq"><button class="input-btn svelte-fc96fq" aria-label="Menos" tabindex="-1">-</button> <input type="number" class="input-value svelte-fc96fq"/> <button class="input-btn svelte-fc96fq" aria-label="MÃ¡s" tabindex="-1">+</button></div></div>');function de(n,e){ee(e,!1);let a=E(e,"label",8),r=E(e,"value",8),o=E(e,"min",8,1),u=E(e,"max",8,60),i=E(e,"disabled",8,!1),d=E(e,"onChange",8);function k(y){return Math.max(o(),Math.min(u(),y))}function _(){i()||d()(k(r()-1))}function s(){i()||d()(k(r()+1))}function f(y){if(i())return;const m=y.target,b=k(Number((m==null?void 0:m.value)??o()));d()(b)}oe();var l=Oa(),v=A(l),c=A(v,!0);w(v);var S=x(v,2),p=A(S),h=x(p,2);Aa(h);var M=x(h,2);w(S),w(l),W(()=>{K(c,a()),p.disabled=i()||r()<=o(),O(h,"min",o()),O(h,"max",u()),xa(h,r()),h.disabled=i(),M.disabled=i()||r()>=u()}),Z("click",p,_),Z("input",h,f),Z("click",M,s),N(n,l),ae()}var Pa=P('<div class="inputs-row svelte-lx354x"><!> <!> <!> <!></div>');function qa(n,e){ee(e,!1);const a=T();let r=E(e,"workMinutes",8),o=E(e,"breakMinutes",8),u=E(e,"longBreakMinutes",8),i=E(e,"breaksBeforeLong",8),d=E(e,"isWork",8),k=E(e,"isLongBreak",8),_=E(e,"isRunning",8),s=E(e,"totalSeconds",8);const f=Ie();function l(b){f("update",{key:"workMinutes",value:b}),d()&&f("syncPhase",{minutes:b,seconds:0})}function v(b){f("update",{key:"breakMinutes",value:b}),!d()&&!k()&&f("syncPhase",{minutes:b,seconds:0})}function c(b){f("update",{key:"longBreakMinutes",value:b}),!d()&&k()&&f("syncPhase",{minutes:b,seconds:0})}function S(b){f("update",{key:"breaksBeforeLong",value:b})}G(()=>(le(_()),le(s())),()=>{g(a,_()||s()>0)}),ke(),oe();var p=Pa(),h=A(p);de(h,{label:"WORK MIN",get disabled(){return t(a)},get value(){return r()},min:1,max:90,onChange:l});var M=x(h,2);de(M,{label:"SHORT BREAK MIN",get disabled(){return t(a)},get value(){return o()},min:1,max:30,onChange:v});var y=x(M,2);de(y,{label:"LONG BREAK MIN",get disabled(){return t(a)},get value(){return u()},min:1,max:60,onChange:c});var m=x(y,2);de(m,{label:"LONG BREAK EVERY",get value(){return i()},min:1,max:10,get disabled(){return t(a)},onChange:S}),w(p),N(n,p),ae()}var Da=P("<button> </button>"),Ha=P('<div aria-label="Theme" role="group"><!> <!></div>');function Ce(n,e){let a=E(e,"mode",8,"outside");const r=[{id:"purple",label:"PRP",title:"Purple"},{id:"blue",label:"BLU",title:"Blue"},{id:"green",label:"GRN",title:"Green"},{id:"mono",label:"B/W",title:"Monochrome"}];let o=T("purple");function u(_){g(o,_),document.documentElement.setAttribute("data-theme",_);try{localStorage.setItem("theme",_)}catch{}}if(typeof window<"u"){const _=localStorage.getItem("theme");_&&(g(o,_),document.documentElement.setAttribute("data-theme",_))}var i=Ha(),d=A(i);Ge(d,1,()=>r,He,(_,s)=>{var f=Da(),l=A(f,!0);w(f),W(()=>{$(f,1,`swatch ${t(o)===t(s).id?"active":""}`,"svelte-1d652ig"),O(f,"title",t(s).title),O(f,"aria-label",t(s).title),O(f,"data-id",t(s).id),K(l,t(s).label)}),Z("click",f,()=>u(t(s).id)),N(_,f)});var k=x(d,2);pe(k,e,"default",{}),w(i),W(()=>$(i,1,`theme-switcher ${a()??""}`,"svelte-1d652ig")),N(n,i)}let ge=null;function Ga(){return typeof window>"u"?null:(ge||(ge=new(window.AudioContext||window.webkitAudioContext)),ge)}function I(n,e,a,{type:r="sine",gain:o=.06}={}){const u=n.createOscillator(),i=n.createGain();u.type=r,u.frequency.value=e,i.gain.value=o,u.connect(i).connect(n.destination),u.start();const d=n.currentTime+a/1e3;u.stop(d)}async function Q(n){const e=Ga();if(e){if(e.state==="suspended")try{await e.resume()}catch{}switch(n){case"start":{I(e,660,90,{type:"triangle"}),setTimeout(()=>I(e,880,90,{type:"triangle"}),90);break}case"pause":{I(e,520,120,{type:"sine"});break}case"work":{I(e,740,80,{type:"square",gain:.05}),setTimeout(()=>I(e,740,80,{type:"square",gain:.05}),110);break}case"shortBreak":{I(e,440,120,{type:"triangle",gain:.05});break}case"longBreak":{I(e,400,110,{type:"triangle",gain:.05}),setTimeout(()=>I(e,400,110,{type:"triangle",gain:.05}),140);break}case"end":{I(e,620,80,{type:"sine"}),setTimeout(()=>I(e,520,80,{type:"sine"}),100),setTimeout(()=>I(e,420,120,{type:"sine"}),200);break}}}}var Ka=P('<main class="container"><!> <section><div class="pomodoro-header"><span class="header-title">POMODORO</span> <div class="header-status" aria-live="polite"><span class="status-label">STATUS |</span> <span class="status-value"> </span></div></div> <div class="pomodoro-content"><div class="timer"><div class="content-timer"><div class="main" aria-live="polite" aria-atomic="true"> </div> <div class="sub"><span class="sub-label">TOTAL</span> <span class="sub-value"> </span></div></div> <!></div> <div class="controls"><!> <!></div></div> <!></section></main>');function Fa(n,e){ee(e,!1);const a=T(),r=T(),o=T(),u=T();let i=T(25),d=T(5),k=T(15),_=T(4),s=T(t(i)),f=T(0),l=T(!1),v=T(!0),c=T(!1),S=0,p=T(0),h=null;function M(){t(l)||(g(l,!0),Q("start"),t(s)===0&&t(f)===0&&(g(s,t(v)?t(i):t(c)?t(k):t(d)),g(f,0)),h=setInterval(()=>{_e(p),t(f)===0?t(s)===0?(Q("end"),t(v)?(S++,S<=t(_)?(g(v,!1),g(c,!1),g(s,t(d)),g(f,0),Q("shortBreak")):(g(v,!1),g(c,!0),g(s,t(k)),g(f,0),S=0,Q("longBreak"))):(g(v,!0),g(c,!1),g(s,t(i)),g(f,0),Q("work"))):(_e(s,-1),g(f,59)):_e(f,-1)},1e3))}function y(){g(l,!1),h&&clearInterval(h),Q("pause")}function m(){g(l,!1),h&&clearInterval(h),g(v,!0),g(c,!1),g(s,t(i)),g(f,0),g(p,0),S=0}function b(R){var X,we;if(R.repeat)return;const B=R.target,q=(we=(X=B==null?void 0:B.tagName)==null?void 0:X.toLowerCase)==null?void 0:we.call(X);q==="input"||q==="textarea"||B!=null&&B.isContentEditable||(R.code==="Space"?(R.preventDefault(),t(l)?y():M()):(R.key||"").toLowerCase()==="r"&&m())}Je(()=>{h&&clearInterval(h)}),G(()=>(t(v),t(c)),()=>{g(a,t(v)?"WORK":t(c)?"LONG BREAK":"BREAK")}),G(()=>(t(l),t(p),t(a)),()=>{g(r,!t(l)&&t(p)===0?"READY":t(l)?t(a):"PAUSE")}),G(()=>(t(l),t(p)),()=>{g(o,t(l)||t(p)>0)}),G(()=>(t(v),t(s),t(f),t(i),t(c),t(k),t(d)),()=>{g(u,t(v)?1-(t(s)*60+t(f))/(t(i)*60):t(c)?1-(t(s)*60+t(f))/(t(k)*60):1-(t(s)*60+t(f))/(t(d)*60))}),ke(),oe();var te=Ka();Z("keydown",ga,b);var z=A(te);Ce(z,{mode:"outside"});var L=x(z,2),U=A(L),Y=x(A(U),2),D=x(A(Y),2),ne=A(D,!0);w(D),w(Y),w(U);var re=x(U,2),V=A(re),F=A(V),J=A(F),ue=A(J);w(J);var ie=x(J,2),ye=x(A(ie),2),ze=A(ye);w(ye),w(ie),w(F);var Ue=x(F,2);const Ye=j(()=>t(u)*100);Ra(Ue,{get percent(){return t(Ye)}}),w(V);var Me=x(V,2),Ee=A(Me);qa(Ee,{get workMinutes(){return t(i)},get breakMinutes(){return t(d)},get longBreakMinutes(){return t(k)},get breaksBeforeLong(){return t(_)},get isWork(){return t(v)},get isLongBreak(){return t(c)},get isRunning(){return t(l)},get totalSeconds(){return t(p)},$$events:{update:R=>{const{key:B,value:q}=R.detail;B==="workMinutes"&&g(i,q),B==="breakMinutes"&&g(d,q),B==="longBreakMinutes"&&g(k,q),B==="breaksBeforeLong"&&g(_,q)},syncPhase:R=>{g(s,R.detail.minutes),g(f,R.detail.seconds)}}});var Ve=x(Ee,2);Na(Ve,{get isRunning(){return t(l)},$$events:{start:M,pause:y,reset:m}}),w(Me),w(re);var Fe=x(re,2);Ce(Fe,{mode:"inside"}),w(L),w(te),W((R,B,q,X)=>{$(L,1,`pomodoro ${t(l)?"running":"paused"}`),K(ne,t(r)),K(ue,`${R??""}:${B??""}`),K(ze,`${q??""}:${X??""}`)},[()=>t(s).toString().padStart(2,"0"),()=>t(f).toString().padStart(2,"0"),()=>Math.floor(t(p)/60),()=>(t(p)%60).toString().padStart(2,"0")],j),N(n,te),ae()}export{Fa as component};
